<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contador Romântico</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Contador Romântico</h1>
        <p class="romantico">Juntos a cada segundo!</p>

        <!-- Formulário para inserção de data e hora -->
        <form id="form" enctype="multipart/form-data">
            <label for="data">Escolha uma data:</label>
            <input type="date" id="data" name="data" required>
            <label for="hora">Escolha uma hora:</label>
            <input type="time" id="hora" name="hora" required>
            <label for="foto">Escolha uma foto:</label>
            <input type="file" id="foto" name="foto" accept="image/*">
            <button type="submit">Iniciar Contador</button>
        </form>

        <!-- Exibição do contador e imagem -->
        <div id="resultado" style="display:none;">
            <p class="contador" id="contador"></p>
            <img id="fotoImg" class="foto" src="" alt="Imagem Romântica">
        </div>
    </div>

    <script>
        // Função para calcular o tempo restante
        function calcularTempo() {
            const dataSelecionada = document.getElementById("data").value;
            const horaSelecionada = document.getElementById("hora").value;
            const fotoSelecionada = document.getElementById("foto").files[0]; // Arquivo de imagem

            if (dataSelecionada && horaSelecionada) {
                // Garantir que a data e hora estejam no formato correto
                const dataHoraFinal = new Date(dataSelecionada + 'T' + horaSelecionada + ':00');

                // Obter a data e hora atuais
                const agora = new Date();
                
                // Verificar se a data e hora escolhidas são no futuro
                if (dataHoraFinal <= agora) {
                    alert("A data e hora já passaram.");
                    return;
                }

                // Calcular os tempos em anos, dias, horas, minutos e segundos
                const tempoRestante = dataHoraFinal - agora;
                const segundos = Math.floor(tempoRestante / 1000);
                const minutos = Math.floor(segundos / 60);
                const horas = Math.floor(minutos / 60);
                const dias = Math.floor(horas / 24);
                const anos = Math.floor(dias / 365);

                // Exibir o contador
                const textoContador = `${anos} anos, ${dias % 365} dias, ${horas % 24} horas, ${minutos % 60} minutos, ${segundos % 60} segundos`;
                document.getElementById("contador").textContent = textoContador;

                // Exibir a foto, se houver
                if (fotoSelecionada) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById("fotoImg").src = e.target.result;
                    };
                    reader.readAsDataURL(fotoSelecionada);
                }

                // Mostrar o resultado
                document.getElementById("resultado").style.display = 'block';
            } else {
                alert("Por favor, insira a data e hora.");
            }
        }

        // Adicionar evento para submeter o formulário
        document.getElementById("form").addEventListener("submit", function(event) {
            event.preventDefault();
            calcularTempo();
        });
    </script>
</body>
</html>
