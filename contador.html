<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultado do Contador Romântico</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="resultado-container">
        <h1>Contador Romântico</h1>
        <p class="romantico">Juntos a cada segundo...</p>
        
        <!-- Exibição do contador -->
        <div id="resultado">
            <p id="contador">Carregando...</p>
            <img id="fotoImg" class="foto" src="" alt="Imagem Romântica">
        </div>
        
        <button onclick="window.history.back();">Voltar</button>
    </div>

    <script>
        window.onload = function() {
            const dataSelecionada = localStorage.getItem('dataSelecionada');
            const horaSelecionada = localStorage.getItem('horaSelecionada');
            const fotoSelecionada = localStorage.getItem('fotoSelecionada');

            // Verificar se a data e hora foram salvas corretamente
            if (!dataSelecionada || !horaSelecionada) {
                alert("Erro ao carregar a data e hora. Tente novamente.");
                return;
            }

            // Exibir no console para debugging
            console.log("Data selecionada: ", dataSelecionada);
            console.log("Hora selecionada: ", horaSelecionada);

            // Criar o objeto de data e hora final
            const dataHoraFinal = new Date(dataSelecionada + 'T' + horaSelecionada);
            
            // Função para calcular o tempo restante
            function calcularTempo() {
                const agora = new Date();
                const tempoRestante = dataHoraFinal - agora;

                // Verificar se tempoRestante é um número válido
                if (isNaN(tempoRestante)) {
                    alert("Erro no cálculo do tempo. Tente novamente.");
                    return;
                }

                // Cálculo de anos, meses, dias, horas, minutos, segundos
                const anos = Math.floor(tempoRestante / (1000 * 60 * 60 * 24 * 365));
                const meses = Math.floor((tempoRestante % (1000 * 60 * 60 * 24 * 365)) / (1000 * 60 * 60 * 24 * 30));
                const dias = Math.floor((tempoRestante % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));
                const horas = Math.floor((tempoRestante % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutos = Math.floor((tempoRestante % (1000 * 60 * 60)) / (1000 * 60));
                const segundos = Math.floor((tempoRestante % (1000 * 60)) / 1000);

                // Formatar e exibir o contador
                const textoContador = `${anos} anos, ${meses} meses, ${dias} dias, ${horas} horas, ${minutos} minutos, ${segundos} segundos`;
                document.getElementById("contador").textContent = textoContador;
            }

            // Atualizar a cada segundo
            setInterval(calcularTempo, 1000);

            // Exibir a foto, se houver
            if (fotoSelecionada) {
                document.getElementById("fotoImg").src = fotoSelecionada;
            }
        }
    </script>
</body>
</html>
